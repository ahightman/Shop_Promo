<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hightman Enterprises</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/base-min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  </head>

  <body ng-app="app" ng-controller="PromosCtrl as promos">

    <main ng-cloak>
      <div ng-if="!promos.current">
        <div ng-repeat="vehicle in promos.all">
          <div ng-click="promos.editPromo(vehicle)">
            <div class="vehicleMainInfo">
              <h1>{{vehicle.year}} {{vehicle.make}} {{vehicle.model}}</h1>
              <h2>{{vehicle.price | currency}}</h2>
            </div>
            <div ng-repeat="upgrade in vehicle.upgrades">
              <div class="listUpgrades">
                {{upgrade.description}}
                {{upgrade.cost | currency}}
              </div>
              <button class="deletePromo" ng-click="promos.removePromo(vehicle)">X</button>
            </div>
            <h2>{{vehicle.total | currency}}</h2>
          </div>
        </div>
        <button class="pure-button" ng-click="promos.createPromo()">+ New Promo</button>
      </div>

      <div ng-if="promos.current">
        <form class="pure-form pure-form-aligned" ng-submit="promos.current.addUpgrade()">
          <fieldset>
            <div class="pure-control-group">
              <label for="year">Year</label>
              <input id="year" ng-model="promos.current.year">
            </div>
            <div class="pure-control-group">
              <label for="make">Make</label>
              <input id="make" ng-model="promos.current.make">
            </div>
            <div class="pure-control-group">
              <label for="model">Model</label>
              <input id="model" ng-model="promos.current.model">
            </div>
            <div class="pure-control-group">
              <label for="mileage">Mileage</label>
              <input id="mileage" ng-model="promos.current.mileage">
            </div>
            <div class="pure-control-group">
              <label for="style">Style</label>
              <input id="style" ng-model="promos.current.style">
            </div>
            <div class="pure-control-group">
              <label for="trans">Transmission</label>
              <input id="trans" ng-model="promos.current.trans">
            </div>
            <div class="pure-control-group">
              <label for="extcolor">Exterior Color</label>
              <input id="extcolor" ng-model="promos.current.extcolor">
            </div>
            <div class="pure-control-group">
              <label for="intcolor">Interior Color</label>
              <input id="intcolor" ng-model="promos.current.intcolor">
            </div>
            <div class="pure-control-group">
              <label for="price">Price</label>
              <input id="price" type="number" ng-model="promos.current.price">
            </div>
          </fieldset>
          <div class="upgradesForm">
            <legend>Available Upgrades</legend>
            <fieldset ng-repeat="upgrade in promos.current.upgrades">
              <input type="text" ng-model="upgrade.description" placeholder="Description">
              <input type="number" ng-model="upgrade.cost" step="any" placeholder="Cost">
              <button type="button" class="deleteUpgrade" ng-click="promos.deleteUpgrade(upgrade)">x</button>
            </fieldset>
            <fieldset>
              <span class="totalLabel">Total</span>
              <span class="total">{{promos.current.total | currency}}</span>
              <button class="addUpgrade" ng-click="promos.addUpgrade()">+</button>
            </fieldset>
          </div>
        </form>
        <button class="pure-button save" ng-click="promos.doneEditing()">Save</button>
      </div>
    </main>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-animate.min.js"></script>

    <script src="promos-controller.js"></script>

  </body>
</html>
